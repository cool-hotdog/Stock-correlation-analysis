<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>股票相关性分析系统 | Stock Correlation Analysis</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="app-container">
        <!-- 侧边导航栏 -->
        <nav class="sidebar">
            <div class="logo">
                <span class="logo-icon">📈</span>
                <span class="logo-text">Stock Analysis</span>
            </div>
            <ul class="nav-menu">
                <li class="nav-item active" data-tab="two-stocks">
                    <span class="nav-icon">📊</span>
                    <span class="nav-text">两股票相关性</span>
                </li>
                <li class="nav-item" data-tab="thirty-stocks">
                    <span class="nav-icon">🔥</span>
                    <span class="nav-text">30股票分析</span>
                </li>
                <li class="nav-item" data-tab="combined">
                    <span class="nav-icon">🧮</span>
                    <span class="nav-text">综合相关系数</span>
                </li>
            </ul>
            <div class="sidebar-footer">
                <p>CS61A Project Style</p>
                <p>Stock Correlation v1.0</p>
            </div>
        </nav>

        <!-- 主内容区域 -->
        <main class="main-content">
            <!-- 顶部标题栏 -->
            <header class="header">
                <h1 id="page-title">两只股票相关性分析</h1>
                <div class="header-info">
                    <span id="current-date"></span>
                </div>
            </header>

            <!-- Tab 内容区 -->
            <div class="tab-contents">
                <!-- Tab 1: 两只股票相关性 -->
                <div id="two-stocks" class="tab-content active">
                    <div class="card">
                        <div class="card-header">
                            <h2>输入股票代码</h2>
                            <p class="card-desc">输入两只股票代码，计算它们收益率的皮尔逊相关系数</p>
                        </div>
                        <div class="card-body">
                            <form id="two-stocks-form" class="form-grid">
                                <div class="form-group">
                                    <label for="stock1">股票1代码</label>
                                    <input type="text" id="stock1" placeholder="如: 600519.SH" required>
                                </div>
                                <div class="form-group">
                                    <label for="stock2">股票2代码</label>
                                    <input type="text" id="stock2" placeholder="如: 000001.SZ" required>
                                </div>
                                <div class="form-group">
                                    <label for="start-date-1">开始日期</label>
<<<<<<< HEAD
                                    <input type="text" id="start-date-1" placeholder="如: 20210101" value="20210101">
                                </div>
                                <div class="form-group">
                                    <label for="end-date-1">结束日期</label>
                                    <input type="text" id="end-date-1" placeholder="如: 20251231" value="20251231">
=======
                                    <input type="date" id="start-date-1" value="2021-01-01">
                                </div>
                                <div class="form-group">
                                    <label for="end-date-1">结束日期</label>
                                    <input type="date" id="end-date-1" value="2025-12-31">
>>>>>>> 82a7c6e (Initial commit: project import)
                                </div>
                                <div class="form-actions">
                                    <button type="submit" class="btn btn-primary">
                                        <span class="btn-icon">🔍</span>
                                        开始分析
                                    </button>
                                    <button type="reset" class="btn btn-secondary">清空</button>
                                </div>
                            </form>
                        </div>
                    </div>

                    <!-- 结果展示区 -->
                    <div id="two-stocks-result" class="result-card hidden">
                        <div class="card-header">
                            <h2>分析结果</h2>
                        </div>
                        <div class="card-body">
                            <div class="result-grid">
                                <div class="result-item highlight">
                                    <span class="result-label">皮尔逊相关系数</span>
                                    <span class="result-value" id="result-correlation">--</span>
                                </div>
                                <div class="result-item">
                                    <span class="result-label">P值（显著性）</span>
                                    <span class="result-value" id="result-pvalue">--</span>
                                </div>
                                <div class="result-item">
                                    <span class="result-label">样本交易日数</span>
                                    <span class="result-value" id="result-days">--</span>
                                </div>
                                <div class="result-item">
                                    <span class="result-label">相关性解读</span>
                                    <span class="result-value" id="result-interpretation">--</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tab 2: 30只股票分析 -->
                <div id="thirty-stocks" class="tab-content">
                    <div class="card">
                        <div class="card-header">
                            <h2>输入股票代码池</h2>
                            <p class="card-desc">输入多只股票代码（推荐30只），生成相关性矩阵、热力图和Top5相关股票对</p>
                        </div>
                        <div class="card-body">
                            <form id="thirty-stocks-form">
                                <div class="form-group full-width">
                                    <label for="stock-codes">股票代码列表（用空格或逗号分隔）</label>
                                    <textarea id="stock-codes" rows="4" placeholder="如: 600519.SH 000001.SZ 000002.SZ 600036.SH ..."></textarea>
                                </div>
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="start-date-2">开始日期</label>
<<<<<<< HEAD
                                        <input type="text" id="start-date-2" placeholder="如: 20250101" value="20250101">
                                    </div>
                                    <div class="form-group">
                                        <label for="end-date-2">结束日期</label>
                                        <input type="text" id="end-date-2" placeholder="如: 20251231" value="20251231">
=======
                                        <input type="date" id="start-date-2" value="2025-01-01">
                                    </div>
                                    <div class="form-group">
                                        <label for="end-date-2">结束日期</label>
                                        <input type="date" id="end-date-2" value="2025-12-31">
>>>>>>> 82a7c6e (Initial commit: project import)
                                    </div>
                                </div>
                                <div class="form-actions">
                                    <button type="submit" class="btn btn-primary">
                                        <span class="btn-icon">🔥</span>
                                        生成热力图分析
                                    </button>
                                    <button type="button" id="load-sample" class="btn btn-secondary">加载示例股票</button>
                                </div>
                            </form>
                        </div>
                    </div>

                    <!-- 结果展示区 -->
                    <div id="thirty-stocks-result" class="result-card hidden">
                        <div class="card-header">
                            <h2>分析结果</h2>
                        </div>
                        <div class="card-body">
                            <!-- Top5 相关股票对 -->
                            <div class="result-section">
                                <h3>🏆 相关性最高的5组股票对</h3>
                                <div id="top5-list" class="top5-container"></div>
                            </div>
                            
                            <!-- 热力图 -->
                            <div class="result-section">
                                <h3>🔥 相关性矩阵热力图</h3>
                                <div class="heatmap-container">
                                    <img id="heatmap-img" src="" alt="相关性热力图">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tab 3: 综合相关系数 -->
                <div id="combined" class="tab-content">
                    <div class="card">
                        <div class="card-header">
                            <h2>综合相关系数分析</h2>
                            <p class="card-desc">同时计算 Pearson 和 Spearman 相关系数，输出综合相关矩阵</p>
                        </div>
                        <div class="card-body">
                            <form id="combined-form">
                                <div class="form-group full-width">
                                    <label for="stock-codes-combined">股票代码列表（用空格或逗号分隔）</label>
                                    <textarea id="stock-codes-combined" rows="4" placeholder="如: 600519.SH 000001.SZ 000002.SZ 600036.SH ..."></textarea>
                                </div>
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="start-date-3">开始日期</label>
<<<<<<< HEAD
                                        <input type="text" id="start-date-3" placeholder="如: 20250101" value="20250101">
                                    </div>
                                    <div class="form-group">
                                        <label for="end-date-3">结束日期</label>
                                        <input type="text" id="end-date-3" placeholder="如: 20251231" value="20251231">
=======
                                        <input type="date" id="start-date-3" value="2025-01-01">
                                    </div>
                                    <div class="form-group">
                                        <label for="end-date-3">结束日期</label>
                                        <input type="date" id="end-date-3" value="2025-12-31">
>>>>>>> 82a7c6e (Initial commit: project import)
                                    </div>
                                </div>
                                <div class="form-actions">
                                    <button type="submit" class="btn btn-primary">
                                        <span class="btn-icon">🧮</span>
                                        计算综合系数
                                    </button>
                                    <button type="button" id="load-sample-combined" class="btn btn-secondary">加载示例股票</button>
                                </div>
                            </form>
                        </div>
                    </div>

                    <!-- 结果展示区 -->
                    <div id="combined-result" class="result-card hidden">
                        <div class="card-header">
                            <h2>综合分析结果</h2>
                        </div>
                        <div class="card-body">
                            <!-- 方法说明 -->
                            <div class="result-section">
                                <h3>📖 计算方法</h3>
                                <div class="method-desc">
                                    <p><strong>Pearson相关系数</strong>：衡量线性相关程度，对异常值敏感</p>
                                    <p><strong>Spearman相关系数</strong>：衡量单调相关程度，基于秩次，抗异常值</p>
                                    <p><strong>综合系数</strong>：(Pearson + Spearman) / 2，综合两种方法优点</p>
                                </div>
                            </div>
                            
                            <!-- 综合热力图 -->
                            <div class="result-section">
                                <h3>🔥 综合相关系数热力图</h3>
                                <div class="heatmap-container">
                                    <img id="combined-heatmap-img" src="" alt="综合相关性热力图">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Loading 遮罩 -->
    <div id="loading-overlay" class="loading-overlay hidden">
        <div class="loading-spinner">
            <div class="spinner"></div>
            <p>正在分析中，请稍候...</p>
        </div>
    </div>

    <!-- Toast 通知 -->
    <div id="toast" class="toast hidden"></div>

    <script src="main.js"></script>
</body>
</html>
